{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonContent,IonHeader,IonPage,IonTitle,IonToolbar,IonBackButton,IonButtons,IonButton,IonIcon,IonAlert}from'@ionic/react';import React,{useEffect,useState}from'react';import{useHistory,useRouteMatch}from'react-router';import{useAuth}from'../auth';import{firestore}from'../firebase';import{toEntry}from'../models';import{trash as trashIcon,pencil as pencilIcon,checkmarkCircle,closeCircle}from'ionicons/icons';import{formatDate}from'../date';import'./EntryPage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EntryPage=function EntryPage(){var match=useRouteMatch();var id=match.params.id;var _useAuth=useAuth(),userId=_useAuth.userId;var _useState=useState(),_useState2=_slicedToArray(_useState,2),entry=_useState2[0],setEntry=_useState2[1];var history=useHistory();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showConfirmDelete=_useState4[0],setShowConfirmDelete=_useState4[1];useEffect(function(){var entryRef=firestore.collection('users').doc(userId).collection('entries').doc(id);var unsubscribe=entryRef.onSnapshot(function(doc){setEntry(toEntry(doc));});return unsubscribe;},[userId,id]);var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var entryRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setShowConfirmDelete(false);entryRef=firestore.collection('users').doc(userId).collection('entries').doc(id);_context.next=4;return entryRef.delete();case 4:history.goBack();case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleDelete(){return _ref.apply(this,arguments);};}();var handleEdit=function handleEdit(){history.push(\"/my/edit-entry/\".concat(id));};return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsx(IonBackButton,{})}),/*#__PURE__*/_jsx(IonTitle,{children:entry===null||entry===void 0?void 0:entry.title}),/*#__PURE__*/_jsxs(IonButtons,{slot:\"end\",children:[/*#__PURE__*/_jsx(IonButton,{onClick:handleEdit,children:/*#__PURE__*/_jsx(IonIcon,{icon:pencilIcon,slot:\"icon-only\"})}),/*#__PURE__*/_jsx(IonButton,{onClick:function onClick(){return setShowConfirmDelete(true);},children:/*#__PURE__*/_jsx(IonIcon,{icon:trashIcon,slot:\"icon-only\"})})]})]})}),/*#__PURE__*/_jsxs(IonContent,{className:\"ion-padding\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"entry-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:entry===null||entry===void 0?void 0:entry.title}),/*#__PURE__*/_jsx(\"p\",{children:formatDate(entry===null||entry===void 0?void 0:entry.date)}),/*#__PURE__*/_jsx(\"p\",{children:entry===null||entry===void 0?void 0:entry.description}),/*#__PURE__*/_jsx(\"p\",{children:(entry===null||entry===void 0?void 0:entry.completed)?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IonIcon,{icon:checkmarkCircle,color:\"success\"}),\" Completed\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IonIcon,{icon:closeCircle,color:\"danger\"}),\" Not completed\"]})}),\"        \",(entry===null||entry===void 0?void 0:entry.link)&&/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:entry===null||entry===void 0?void 0:entry.link,children:entry===null||entry===void 0?void 0:entry.link})}),(entry===null||entry===void 0?void 0:entry.pictureUrl)&&/*#__PURE__*/_jsx(\"img\",{className:\"entry-image\",src:entry===null||entry===void 0?void 0:entry.pictureUrl,alt:entry===null||entry===void 0?void 0:entry.title})]}),/*#__PURE__*/_jsx(IonAlert,{isOpen:showConfirmDelete,onDidDismiss:function onDidDismiss(){return setShowConfirmDelete(false);},header:'Delete Entry',message:'Are you sure you want to delete this entry?',buttons:[{text:'Cancel',role:'cancel',cssClass:'secondary',handler:function handler(){setShowConfirmDelete(false);}},{text:'Delete',handler:function handler(){handleDelete();}}]})]})]});};export default EntryPage;","map":{"version":3,"names":["IonContent","IonHeader","IonPage","IonTitle","IonToolbar","IonBackButton","IonButtons","IonButton","IonIcon","IonAlert","React","useEffect","useState","useHistory","useRouteMatch","useAuth","firestore","toEntry","trash","trashIcon","pencil","pencilIcon","checkmarkCircle","closeCircle","formatDate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EntryPage","match","id","params","_useAuth","userId","_useState","_useState2","_slicedToArray","entry","setEntry","history","_useState3","_useState4","showConfirmDelete","setShowConfirmDelete","entryRef","collection","doc","unsubscribe","onSnapshot","handleDelete","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","delete","goBack","stop","apply","arguments","handleEdit","push","concat","children","slot","title","onClick","icon","className","date","description","completed","color","link","href","pictureUrl","src","alt","isOpen","onDidDismiss","header","message","buttons","text","role","cssClass","handler"],"sources":["/Users/hninwintthuaung/Desktop/tester/src/pages/EntryPage.tsx"],"sourcesContent":["import {\n  IonContent,\n  IonHeader,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonBackButton,\n  IonButtons,\n  IonButton,\n  IonIcon,\n  IonAlert\n} from '@ionic/react';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport { useAuth } from '../auth';\nimport { firestore } from '../firebase';\nimport { Entry, toEntry } from '../models';\nimport { trash as trashIcon, pencil as pencilIcon, checkmarkCircle, closeCircle } from 'ionicons/icons';\nimport { formatDate } from '../date';\nimport './EntryPage.css';\n\ninterface RouteParams {\n  id: string;\n}\n\nconst EntryPage: React.FC = () => {\n  const match = useRouteMatch<RouteParams>();\n  const { id } = match.params;\n  const { userId } = useAuth();\n  const [entry, setEntry] = useState<Entry>();\n  const history = useHistory();\n  const [showConfirmDelete, setShowConfirmDelete] = useState(false);\n\n  useEffect(() => {\n    const entryRef = firestore.collection('users').doc(userId)\n      .collection('entries').doc(id);\n    const unsubscribe = entryRef.onSnapshot((doc) => {\n      setEntry(toEntry(doc));\n    });\n    return unsubscribe;\n  }, [userId, id]);\n  \n\n  const handleDelete = async () => {\n    setShowConfirmDelete(false);\n    const entryRef = firestore.collection('users').doc(userId)\n      .collection('entries').doc(id);\n    await entryRef.delete();\n    history.goBack();\n  };\n\n  const handleEdit = () => {\n    history.push(`/my/edit-entry/${id}`);\n  };\n\n  \n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonBackButton />\n          </IonButtons>\n          <IonTitle>\n            {entry?.title}\n          </IonTitle>\n          <IonButtons slot=\"end\">\n          <IonButton onClick={handleEdit}>\n              <IonIcon icon={pencilIcon} slot=\"icon-only\" />\n            </IonButton>\n            <IonButton onClick={() => setShowConfirmDelete(true)}>\n              <IonIcon icon={trashIcon} slot=\"icon-only\" />\n            </IonButton>\n\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"ion-padding\">\n      <div className=\"entry-content\">\n        <h2>{entry?.title}</h2>\n        <p>{formatDate(entry?.date)}</p>\n        <p>{entry?.description}</p>\n        <p>\n            {entry?.completed ? \n              <>\n                <IonIcon icon={checkmarkCircle} color=\"success\" /> Completed\n              </>\n              :\n              <>\n                <IonIcon icon={closeCircle} color=\"danger\" /> Not completed\n              </>\n            }\n          </p>        {entry?.link && <p><a href={entry?.link}>{entry?.link}</a></p>}\n        {entry?.pictureUrl && <img className=\"entry-image\" src={entry?.pictureUrl} alt={entry?.title} />}\n      </div>\n\n\n\n        <IonAlert\n          isOpen={showConfirmDelete}\n          onDidDismiss={() => setShowConfirmDelete(false)}\n          header={'Delete Entry'}\n          message={'Are you sure you want to delete this entry?'}\n          buttons={[\n            {\n              text: 'Cancel',\n              role: 'cancel',\n              cssClass: 'secondary',\n              handler: () => {\n                setShowConfirmDelete(false);\n              }\n            },\n            {\n              text: 'Delete',\n              handler: () => {\n                handleDelete();\n              }\n            }\n          ]}\n        />\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default EntryPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}