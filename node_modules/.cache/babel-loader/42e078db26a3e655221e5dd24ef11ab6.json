{"ast":null,"code":"import _slicedToArray from\"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState,useEffect}from'react';import FullCalendar from'@fullcalendar/react';import dayGridPlugin from'@fullcalendar/daygrid';import{firestore}from'../firebase';import{toEntry}from'../models';import{useAuth}from'../auth';import{useHistory}from'react-router-dom';import styled from'styled-components';import'./calendarstyle.css';import{jsx as _jsx}from\"react/jsx-runtime\";var CalendarContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  font-size: 0.8rem;\\n\\n\"])));var Calendar=function Calendar(){var _useAuth=useAuth(),userId=_useAuth.userId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),entries=_useState2[0],setEntries=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var history=useHistory();useEffect(function(){var entriesRef=firestore.collection('users').doc(userId).collection('entries');// Listen to changes in the collection and update the entries state\nvar unsubscribe=entriesRef.onSnapshot(function(_ref){var docs=_ref.docs;setEntries(docs.map(toEntry));setLoading(false);});return unsubscribe;// Cleanup the listener when the component unmounts\n},[userId]);var events=entries.map(function(entry){return{title:entry.title,date:new Date(entry.date),id:entry.id,classNames:entry.completed?'completed':'not-completed'// add classNames based on completion status\n};});var eventRender=function eventRender(info){if(info.event.extendedProps.completed){info.el.style.backgroundColor='blue';// set blue background for completed tasks\n}else{info.el.style.backgroundColor='green';// set green background for incomplete tasks\n}};var handleEventClick=function handleEventClick(_ref2){var event=_ref2.event;history.push(\"/my/entries/view/\".concat(event.id));// redirect to the corresponding entry page\n};return/*#__PURE__*/_jsx(CalendarContainer,{children:!loading&&/*#__PURE__*/_jsx(FullCalendar,{plugins:[dayGridPlugin],initialView:\"dayGridMonth\",events:events,eventClick:handleEventClick// attach the click event handler\n,lazyFetching:true// fetch events for the visible range of dates\n,height:\"500px\"})});};export default Calendar;","map":{"version":3,"names":["React","useState","useEffect","FullCalendar","dayGridPlugin","firestore","toEntry","useAuth","useHistory","styled","jsx","_jsx","CalendarContainer","div","_templateObject","_taggedTemplateLiteral","Calendar","_useAuth","userId","_useState","_useState2","_slicedToArray","entries","setEntries","_useState3","_useState4","loading","setLoading","history","entriesRef","collection","doc","unsubscribe","onSnapshot","_ref","docs","map","events","entry","title","date","Date","id","classNames","completed","eventRender","info","event","extendedProps","el","style","backgroundColor","handleEventClick","_ref2","push","concat","children","plugins","initialView","eventClick","lazyFetching","height"],"sources":["/Users/hninwintthuaung/Desktop/tester/src/pages/calendar.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport { firestore } from '../firebase';\nimport { Entry, toEntry } from '../models';\nimport { useAuth } from '../auth';\nimport { useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\nimport './calendarstyle.css';\n\nconst CalendarContainer = styled.div`\n  font-size: 0.8rem;\n\n`;\n\n\nconst Calendar: React.FC = () => {\n  const { userId } = useAuth();\n  const [entries, setEntries] = useState<Entry[]>([]);\n  const [loading, setLoading] = useState(true);\n  const history = useHistory();\n\n  useEffect(() => {\n    const entriesRef = firestore\n      .collection('users')\n      .doc(userId)\n      .collection('entries');\n      \n    // Listen to changes in the collection and update the entries state\n    const unsubscribe = entriesRef.onSnapshot(({ docs }) => {\n      setEntries(docs.map(toEntry));\n      setLoading(false);\n    });\n\n    return unsubscribe; // Cleanup the listener when the component unmounts\n\n  }, [userId]);\n\n  const events = entries.map((entry) => ({\n    title: entry.title,\n    date: new Date(entry.date),\n    id: entry.id,\n    classNames: entry.completed ? 'completed' : 'not-completed' // add classNames based on completion status\n  }));\n  \n  \n  const eventRender = (info: any) => {\n    if (info.event.extendedProps.completed) {\n      info.el.style.backgroundColor = 'blue'; // set blue background for completed tasks\n    } else {\n      info.el.style.backgroundColor = 'green'; // set green background for incomplete tasks\n    }\n  };\n\n  const handleEventClick = ({ event }: { event: any }) => {\n    history.push(`/my/entries/view/${event.id}`); // redirect to the corresponding entry page\n  };\n\n  return (\n    <CalendarContainer>\n      {!loading && (\n        <FullCalendar\n          plugins={[dayGridPlugin]}\n          initialView=\"dayGridMonth\"\n          events={events}\n          eventClick={handleEventClick} // attach the click event handler\n          lazyFetching={true} // fetch events for the visible range of dates\n          height='500px'\n        />\n      )}\n    </CalendarContainer>\n  );\n};\nexport default Calendar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}