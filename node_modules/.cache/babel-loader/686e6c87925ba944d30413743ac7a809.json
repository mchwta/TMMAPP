{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _classCallCheck from \"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { Component, createRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Calendar } from '@fullcalendar/core';\nimport { CustomRenderingStore } from '@fullcalendar/core/internal';\nvar FullCalendar = /*#__PURE__*/function (_Component) {\n  _inherits(FullCalendar, _Component);\n  var _super = _createSuper(FullCalendar);\n  function FullCalendar() {\n    var _this;\n    _classCallCheck(this, FullCalendar);\n    _this = _super.apply(this, arguments);\n    _this.elRef = createRef();\n    _this.needsCustomRenderingResize = false;\n    _this.isInitialRender = true;\n    _this.state = {\n      customRenderingMap: new Map()\n    };\n    return _this;\n  }\n  _createClass(FullCalendar, [{\n    key: \"render\",\n    value: function render() {\n      var portalNodes = [];\n      var _iterator = _createForOfIteratorHelper(this.state.customRenderingMap.values()),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var customRendering = _step.value;\n          var generatorMeta = customRendering.generatorMeta;\n          var vnode = typeof generatorMeta === 'function' ? generatorMeta(customRendering.renderProps) : generatorMeta;\n          portalNodes.push(createPortal(vnode, customRendering.containerEl, customRendering.id));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return React.createElement(\"div\", {\n        ref: this.elRef\n      }, portalNodes);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var customRenderingStore = new CustomRenderingStore();\n      this.handleCustomRendering = customRenderingStore.handle.bind(customRenderingStore);\n      this.calendar = new Calendar(this.elRef.current, Object.assign(Object.assign({}, this.props), {\n        handleCustomRendering: this.handleCustomRendering\n      }));\n      this.calendar.render();\n      customRenderingStore.subscribe(function (customRenderingMap) {\n        if (_this2.isInitialRender) {\n          _this2.doCustomRendering(customRenderingMap);\n        } else {\n          _this2.requestCustomRendering(customRenderingMap);\n        }\n      });\n    }\n  }, {\n    key: \"requestCustomRendering\",\n    value: function requestCustomRendering(customRenderingMap) {\n      var _this3 = this;\n      this.cancelCustomRendering();\n      this.customRenderingRequestId = requestAnimationFrame(function () {\n        FullCalendar.act(function () {\n          _this3.doCustomRendering(customRenderingMap);\n        });\n      });\n    }\n  }, {\n    key: \"doCustomRendering\",\n    value: function doCustomRendering(customRenderingMap) {\n      this.needsCustomRenderingResize = true;\n      this.setState({\n        customRenderingMap: customRenderingMap\n      });\n    }\n  }, {\n    key: \"cancelCustomRendering\",\n    value: function cancelCustomRendering() {\n      if (this.customRenderingRequestId) {\n        cancelAnimationFrame(this.customRenderingRequestId);\n        this.customRenderingRequestId = undefined;\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.isInitialRender = false;\n      this.calendar.resetOptions(Object.assign(Object.assign({}, this.props), {\n        handleCustomRendering: this.handleCustomRendering\n      }));\n      if (this.needsCustomRenderingResize) {\n        this.needsCustomRenderingResize = false;\n        this.calendar.updateSize();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.calendar.destroy();\n      this.cancelCustomRendering();\n    }\n  }, {\n    key: \"getApi\",\n    value: function getApi() {\n      return this.calendar;\n    }\n  }]);\n  return FullCalendar;\n}(Component);\nexport { FullCalendar as default };\nFullCalendar.act = function (f) {\n  f();\n};","map":{"version":3,"names":["React","Component","createRef","createPortal","Calendar","CustomRenderingStore","FullCalendar","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","elRef","needsCustomRenderingResize","isInitialRender","state","customRenderingMap","Map","_createClass","key","value","render","portalNodes","_iterator","_createForOfIteratorHelper","values","_step","s","n","done","customRendering","generatorMeta","vnode","renderProps","push","containerEl","id","err","e","f","createElement","ref","componentDidMount","_this2","customRenderingStore","handleCustomRendering","handle","bind","calendar","current","Object","assign","props","subscribe","doCustomRendering","requestCustomRendering","_this3","cancelCustomRendering","customRenderingRequestId","requestAnimationFrame","act","setState","cancelAnimationFrame","undefined","componentDidUpdate","resetOptions","updateSize","componentWillUnmount","destroy","getApi","default"],"sources":["../src/index.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}