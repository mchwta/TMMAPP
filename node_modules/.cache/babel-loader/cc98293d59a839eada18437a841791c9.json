{"ast":null,"code":"import _regeneratorRuntime from\"/Users/toy/Documents/APIU University Work/3rd Year/Mobile Dev/code/ionicproject1/DailyMoments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/toy/Documents/APIU University Work/3rd Year/Mobile Dev/code/ionicproject1/DailyMoments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/toy/Documents/APIU University Work/3rd Year/Mobile Dev/code/ionicproject1/DailyMoments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonContent,IonHeader,IonPage,IonTitle,IonToolbar,IonBackButton,IonButtons,IonButton,IonIcon}from'@ionic/react';// import { download } from 'ionicons/icons';\nimport React,{useEffect,useState}from'react';import{useHistory,useRouteMatch}from'react-router';import{useAuth}from'../auth';import{firestore}from'../firebase';import{toEntry}from'../models';import{trash as trashIcon}from'ionicons/icons';import{formatDate}from'../date';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EntryPage=function EntryPage(){var match=useRouteMatch();var id=match.params.id;var _useAuth=useAuth(),userId=_useAuth.userId;var _useState=useState(),_useState2=_slicedToArray(_useState,2),entry=_useState2[0],setEntry=_useState2[1];var history=useHistory();useEffect(function(){var entryRef=firestore.collection('users').doc(userId).collection('entries').doc(id);entryRef.get().then(function(doc){setEntry(toEntry(doc));});// entryRef.get().then((doc) => setEntry(toEntry(doc)));\n// const entry = toEntry;\n// setEntry(entry);\n},[userId,id]);var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var entryRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:entryRef=firestore.collection('users').doc(userId).collection('entries').doc(id);_context.next=3;return entryRef.delete();case 3:history.goBack();case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleDelete(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsx(IonBackButton,{})}),/*#__PURE__*/_jsx(IonTitle,{children:formatDate(entry===null||entry===void 0?void 0:entry.date)}),/*#__PURE__*/_jsx(IonButtons,{slot:\"end\",children:/*#__PURE__*/_jsx(IonButton,{onClick:handleDelete,children:/*#__PURE__*/_jsx(IonIcon,{icon:trashIcon,slot:\"icon-only\"})})})]})}),/*#__PURE__*/_jsxs(IonContent,{className:\"ion-padding\",children:[/*#__PURE__*/_jsx(\"h2\",{children:entry===null||entry===void 0?void 0:entry.title}),/*#__PURE__*/_jsx(\"img\",{src:entry===null||entry===void 0?void 0:entry.pictureUrl,alt:entry===null||entry===void 0?void 0:entry.title}),/*#__PURE__*/_jsx(\"p\",{children:entry===null||entry===void 0?void 0:entry.description})]})]});};export default EntryPage;","map":{"version":3,"sources":["/Users/toy/Documents/APIU University Work/3rd Year/Mobile Dev/code/ionicproject1/DailyMoments/src/pages/EntryPage.tsx"],"names":["IonContent","IonHeader","IonPage","IonTitle","IonToolbar","IonBackButton","IonButtons","IonButton","IonIcon","React","useEffect","useState","useHistory","useRouteMatch","useAuth","firestore","toEntry","trash","trashIcon","formatDate","EntryPage","match","id","params","userId","entry","setEntry","history","entryRef","collection","doc","get","then","handleDelete","delete","goBack","date","title","pictureUrl","description"],"mappings":"ynBAAA,OACEA,UADF,CAEEC,SAFF,CAGEC,OAHF,CAIEC,QAJF,CAKEC,UALF,CAMEC,aANF,CAOEC,UAPF,CAQEC,SARF,CASEC,OATF,KAUO,cAVP,CAWA;AACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,aAArB,KAA0C,cAA1C,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,OAASC,SAAT,KAA0B,aAA1B,CACA,OAAgBC,OAAhB,KAA+B,WAA/B,CACA,OAASC,KAAK,GAAIC,CAAAA,SAAlB,KAAmC,gBAAnC,CACA,OAASC,UAAT,KAA2B,SAA3B,C,wFAMA,GAAMC,CAAAA,SAAmB,CAAG,QAAtBA,CAAAA,SAAsB,EAAM,CAChC,GAAMC,CAAAA,KAAK,CAAGR,aAAa,EAA3B,CACA,GAAQS,CAAAA,EAAR,CAAeD,KAAK,CAACE,MAArB,CAAQD,EAAR,CACA,aAAmBR,OAAO,EAA1B,CAAQU,MAAR,UAAQA,MAAR,CACA,cAA0Bb,QAAQ,EAAlC,wCAAOc,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,OAAO,CAAGf,UAAU,EAA1B,CACAF,SAAS,CAAC,UAAM,CACZ,GAAMkB,CAAAA,QAAQ,CAAGb,SAAS,CAACc,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCN,MAAlC,EACdK,UADc,CACH,SADG,EACQC,GADR,CACYR,EADZ,CAAjB,CAEAM,QAAQ,CAACG,GAAT,GAAeC,IAAf,CAAoB,SAACF,GAAD,CAAS,CAAEJ,QAAQ,CAACV,OAAO,CAACc,GAAD,CAAR,CAAR,CAC9B,CADD,EAEA;AACA;AACE;AACL,CARQ,CAQN,CAACN,MAAD,CAASF,EAAT,CARM,CAAT,CAUA,GAAMW,CAAAA,YAAY,0FAAG,gJACbL,QADa,CACFb,SAAS,CAACc,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCN,MAAlC,EAChBK,UADgB,CACL,SADK,EACMC,GADN,CACUR,EADV,CADE,uBAGbM,CAAAA,QAAQ,CAACM,MAAT,EAHa,QAInBP,OAAO,CAACQ,MAAR,GAJmB,sDAAH,kBAAZF,CAAAA,YAAY,0CAAlB,CAOA,mBACE,MAAC,OAAD,yBACE,KAAC,SAAD,wBACE,MAAC,UAAD,yBACA,KAAC,UAAD,EAAY,IAAI,CAAC,OAAjB,uBACE,KAAC,aAAD,IADF,EADA,cAIE,KAAC,QAAD,WACGd,UAAU,CAACM,KAAD,SAACA,KAAD,iBAACA,KAAK,CAAEW,IAAR,CADb,EAJF,cAOA,KAAC,UAAD,EAAY,IAAI,CAAC,KAAjB,uBACE,KAAC,SAAD,EAAW,OAAO,CAAEH,YAApB,uBACE,KAAC,OAAD,EAAS,IAAI,CAAEf,SAAf,CAA0B,IAAI,CAAC,WAA/B,EADF,EADF,EAPA,GADF,EADF,cAgBE,MAAC,UAAD,EAAY,SAAS,CAAC,aAAtB,wBACQ,oBAAKO,KAAL,SAAKA,KAAL,iBAAKA,KAAK,CAAEY,KAAZ,EADR,cAEQ,YAAK,GAAG,CAAEZ,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEa,UAAjB,CAA6B,GAAG,CAAEb,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEY,KAAzC,EAFR,cAGQ,mBAAIZ,KAAJ,SAAIA,KAAJ,iBAAIA,KAAK,CAAEc,WAAX,EAHR,GAhBF,GADF,CAwBD,CA/CD,CAiDA,cAAenB,CAAAA,SAAf","sourcesContent":["import {\n  IonContent,\n  IonHeader,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonBackButton,\n  IonButtons,\n  IonButton,\n  IonIcon,\n} from '@ionic/react';\n// import { download } from 'ionicons/icons';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory, useRouteMatch } from 'react-router';\nimport { useAuth } from '../auth';\nimport { firestore } from '../firebase';\nimport { Entry, toEntry } from '../models';\nimport { trash as trashIcon } from 'ionicons/icons';\nimport { formatDate } from '../date';\n\ninterface RouteParams {\n  id: string;\n}\n\nconst EntryPage: React.FC = () => {\n  const match = useRouteMatch<RouteParams>();\n  const { id } = match.params;\n  const { userId } = useAuth();\n  const [entry, setEntry] = useState<Entry>();\n  const history = useHistory();\n  useEffect(() => {\n      const entryRef = firestore.collection('users').doc(userId)\n        .collection('entries').doc(id);\n      entryRef.get().then((doc) => { setEntry(toEntry(doc));\n      });\n      // entryRef.get().then((doc) => setEntry(toEntry(doc)));\n      // const entry = toEntry;\n        // setEntry(entry);\n  }, [userId, id]);\n\n  const handleDelete = async () => {\n    const entryRef = firestore.collection('users').doc(userId)\n    .collection('entries').doc(id);\n    await entryRef.delete();\n    history.goBack();\n  };\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n        <IonButtons slot=\"start\">\n          <IonBackButton/>\n        </IonButtons>\n          <IonTitle>\n            {formatDate(entry?.date)}\n          </IonTitle>\n        <IonButtons slot=\"end\">\n          <IonButton onClick={handleDelete}>\n            <IonIcon icon={trashIcon} slot='icon-only' />\n          </IonButton>\n        </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"ion-padding\">\n              <h2>{entry?.title}</h2>\n              <img src={entry?.pictureUrl} alt={entry?.title} />\n              <p>{entry?.description}</p>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default EntryPage;\n\n"]},"metadata":{},"sourceType":"module"}