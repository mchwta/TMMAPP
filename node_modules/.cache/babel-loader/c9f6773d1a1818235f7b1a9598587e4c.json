{"ast":null,"code":"import _slicedToArray from\"/Users/toy/Documents/APIU University Work/3rd Year/Mobile Dev/code/ionicproject1/DailyMoments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonContent,IonFab,IonFabButton,IonHeader,IonIcon,IonItem,IonPage,IonTitle,IonToolbar,IonLabel,IonThumbnail,IonImg}from'@ionic/react';import React,{useEffect,useState}from'react';import{useAuth}from'../auth';import{firestore}from'../firebase';import{toEntry}from'../models';import{add as addIcon}from'ionicons/icons';import{formatDate}from'../date';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(){var _useAuth=useAuth(),userId=_useAuth.userId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),entries=_useState2[0],setEntries=_useState2[1];// const entryRef = firestore.collection('entries').doc(id);\n// entryRef.get().then((doc) => setEntry(toEntry(entry)));\nuseEffect(function(){var entriesRef=firestore.collection('users').doc(userId).collection('entries');return entriesRef.orderBy('date','desc').limit(7).onSnapshot(function(_ref){var docs=_ref.docs;return setEntries(docs.map(toEntry));});//  entriesRef.get().then(({docs}) => setEntries(docs.map(toEntry)))\n},[userId]);return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Homepage\"})})}),/*#__PURE__*/_jsxs(IonContent,{className:\"ion-padding\",children:[entries.map(function(entry){return/*#__PURE__*/_jsxs(IonItem,{button:true,routerLink:\"/my/entries/view/\".concat(entry.id),children:[/*#__PURE__*/_jsx(IonThumbnail,{slot:\"end\",children:/*#__PURE__*/_jsx(IonImg,{src:entry===null||entry===void 0?void 0:entry.pictureUrl})}),/*#__PURE__*/_jsxs(IonLabel,{children:[/*#__PURE__*/_jsx(\"h1\",{children:formatDate(entry.date)}),/*#__PURE__*/_jsx(\"h2\",{children:entry.title})]})]},entry.id);}),/*#__PURE__*/_jsx(IonFab,{vertical:\"bottom\",horizontal:\"end\",children:/*#__PURE__*/_jsx(IonFabButton,{routerLink:\"/my/entries/add\",children:/*#__PURE__*/_jsx(IonIcon,{icon:addIcon})})})]})]});};export default HomePage;","map":{"version":3,"sources":["/Users/toy/Documents/APIU University Work/3rd Year/Mobile Dev/code/ionicproject1/DailyMoments/src/pages/HomePage.tsx"],"names":["IonContent","IonFab","IonFabButton","IonHeader","IonIcon","IonItem","IonPage","IonTitle","IonToolbar","IonLabel","IonThumbnail","IonImg","React","useEffect","useState","useAuth","firestore","toEntry","add","addIcon","formatDate","HomePage","userId","entries","setEntries","entriesRef","collection","doc","orderBy","limit","onSnapshot","docs","map","entry","id","pictureUrl","date","title"],"mappings":"oNAAA,OACEA,UADF,CAEEC,MAFF,CAGEC,YAHF,CAIEC,SAJF,CAKEC,OALF,CAMEC,OANF,CAOEC,OAPF,CAQEC,QARF,CASEC,UATF,CAUEC,QAVF,CAWEC,YAXF,CAYEC,MAZF,KAaO,cAbP,CAcA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,OAASC,SAAT,KAA0B,aAA1B,CACA,OAAgBC,OAAhB,KAA+B,WAA/B,CACA,OAASC,GAAG,GAAIC,CAAAA,OAAhB,KAA+B,gBAA/B,CACA,OAASC,UAAT,KAA2B,SAA3B,C,wFAEA,GAAMC,CAAAA,QAAkB,CAAG,QAArBA,CAAAA,QAAqB,EAAM,CAC/B,aAAmBN,OAAO,EAA1B,CAAQO,MAAR,UAAQA,MAAR,CACA,cAAgCR,QAAQ,CAAU,EAAV,CAAxC,wCAAQS,OAAR,eAAiBC,UAAjB,eAEA;AACA;AAEAX,SAAS,CAAC,UAAM,CACZ,GAAMY,CAAAA,UAAU,CAAGT,SAAS,CAACU,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCL,MAAlC,EAChBI,UADgB,CACL,SADK,CAAnB,CAEA,MAAOD,CAAAA,UAAU,CAACG,OAAX,CAAmB,MAAnB,CAA0B,MAA1B,EAAkCC,KAAlC,CAAwC,CAAxC,EACJC,UADI,CACO,kBAAEC,CAAAA,IAAF,MAAEA,IAAF,OAAYP,CAAAA,UAAU,CAACO,IAAI,CAACC,GAAL,CAASf,OAAT,CAAD,CAAtB,EADP,CAAP,CAEA;AACH,CANQ,CAMN,CAACK,MAAD,CANM,CAAT,CAQA,mBACE,MAAC,OAAD,yBACE,KAAC,SAAD,wBACE,KAAC,UAAD,wBACE,KAAC,QAAD,uBADF,EADF,EADF,cAME,MAAC,UAAD,EAAY,SAAS,CAAC,aAAtB,WACGC,OAAO,CAACS,GAAR,CAAY,SAACC,KAAD,qBACX,MAAC,OAAD,EAAS,MAAM,KAAf,CACE,UAAU,4BAAsBA,KAAK,CAACC,EAA5B,CADZ,wBAEE,KAAC,YAAD,EAAc,IAAI,CAAC,KAAnB,uBACE,KAAC,MAAD,EAAQ,GAAG,CAAED,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEE,UAApB,EADF,EAFF,cAKE,MAAC,QAAD,yBACE,oBAAKf,UAAU,CAACa,KAAK,CAACG,IAAP,CAAf,EADF,cAEE,oBAAKH,KAAK,CAACI,KAAX,EAFF,GALF,GAAqBJ,KAAK,CAACC,EAA3B,CADW,EAAZ,CADH,cAcE,KAAC,MAAD,EAAQ,QAAQ,CAAC,QAAjB,CAA0B,UAAU,CAAC,KAArC,uBACI,KAAC,YAAD,EAAc,UAAU,CAAC,iBAAzB,uBACE,KAAC,OAAD,EAAS,IAAI,CAAEf,OAAf,EADF,EADJ,EAdF,GANF,GADF,CA6BD,CA5CD,CA8CA,cAAeE,CAAAA,QAAf","sourcesContent":["import {\n  IonContent,\n  IonFab,\n  IonFabButton,\n  IonHeader,\n  IonIcon,\n  IonItem,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonLabel,\n  IonThumbnail,\n  IonImg,\n} from '@ionic/react';\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../auth';\nimport { firestore } from '../firebase';\nimport { Entry, toEntry } from '../models';\nimport { add as addIcon } from 'ionicons/icons';\nimport { formatDate } from '../date';\n\nconst HomePage: React.FC = () => {\n  const { userId } = useAuth();\n  const [ entries, setEntries ] = useState<Entry[]>([]);\n\n  // const entryRef = firestore.collection('entries').doc(id);\n  // entryRef.get().then((doc) => setEntry(toEntry(entry)));\n\n  useEffect(() => {\n      const entriesRef = firestore.collection('users').doc(userId)\n        .collection('entries');\n      return entriesRef.orderBy('date','desc').limit(7)\n        .onSnapshot(({docs}) => setEntries(docs.map(toEntry)))\n      //  entriesRef.get().then(({docs}) => setEntries(docs.map(toEntry)))\n  }, [userId]);\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Homepage</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"ion-padding\">\n        {entries.map((entry) =>\n          <IonItem button key={entry.id}\n            routerLink={`/my/entries/view/${entry.id}`}>\n            <IonThumbnail slot=\"end\">\n              <IonImg src={entry?.pictureUrl}/>\n            </IonThumbnail>\n            <IonLabel>\n              <h1>{formatDate(entry.date)}</h1>\n              <h2>{entry.title}</h2>\n            </IonLabel>\n          </IonItem>\n        )}\n\n        <IonFab vertical=\"bottom\" horizontal=\"end\">\n            <IonFabButton routerLink=\"/my/entries/add\">\n              <IonIcon icon={addIcon} />\n            </IonFabButton>\n        </IonFab>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default HomePage;\n\n\n\n"]},"metadata":{},"sourceType":"module"}