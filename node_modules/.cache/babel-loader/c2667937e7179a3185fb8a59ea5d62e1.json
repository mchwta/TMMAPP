{"ast":null,"code":"import _regeneratorRuntime from\"/Users/toy/Documents/APIU University Work/3rd Year/Mobile Dev/code/ionicproject1/DailyMoments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/toy/Documents/APIU University Work/3rd Year/Mobile Dev/code/ionicproject1/DailyMoments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/toy/Documents/APIU University Work/3rd Year/Mobile Dev/code/ionicproject1/DailyMoments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonContent,IonHeader,IonPage,IonTitle,IonToolbar,IonButton,IonItem,IonLabel,IonInput,IonList,IonText,IonLoading}from'@ionic/react';import React,{useState}from'react';import{Redirect}from'react-router';import{useAuth}from'../auth';import{auth}from'../firebase';// interface Props {\n//   onLogin: () => void;\n// }\n// const LoginPage: React.FC<Props> = ({ onLogin }) => {\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=function LoginPage(){// const { loggedIn } = useContext(AuthContext);\nvar _useAuth=useAuth(),loggedIn=_useAuth.loggedIn;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState({loading:false,error:false}),_useState6=_slicedToArray(_useState5,2),status=_useState6[0],setStatus=_useState6[1];var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var credential;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setStatus({loading:true,error:false});_context.next=4;return auth.signInWithEmailAndPassword(email,password);case 4:credential=_context.sent;// setStatus({loading:false, error:false});\nconsole.log('credential:',credential);// onLogin();\n_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setStatus({loading:false,error:true});console.log('error: ',_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function handleLogin(){return _ref.apply(this,arguments);};}();console.log(\"Login Status: \".concat(loggedIn));if(loggedIn){return/*#__PURE__*/_jsx(Redirect,{to:\"/my/entries\"});}return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Login Page\"})})}),/*#__PURE__*/_jsxs(IonContent,{className:\"ion-padding\",children:[/*#__PURE__*/_jsxs(IonList,{children:[/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"Email\"}),/*#__PURE__*/_jsx(IonInput,{type:\"email\",value:email,onIonChange:function onIonChange(event){return setEmail(event.detail.value);}})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"floating\",children:\"Password\"}),/*#__PURE__*/_jsx(IonInput,{type:\"password\",value:password,onIonChange:function onIonChange(event){return setPassword(event.detail.value);}})]})]}),status.error&&/*#__PURE__*/_jsx(IonText,{color:\"danger\",children:\"Invalid Credentials\"}),/*#__PURE__*/_jsx(IonButton,{expand:\"block\",onClick:handleLogin,children:\"Login\"}),/*#__PURE__*/_jsx(IonButton,{expand:\"block\",fill:\"clear\",routerLink:\"/register\",children:\"Don't Have an Account?\"}),/*#__PURE__*/_jsx(IonLoading,{isOpen:status.loading})]})]});};export default LoginPage;","map":{"version":3,"sources":["/Users/toy/Documents/APIU University Work/3rd Year/Mobile Dev/code/ionicproject1/DailyMoments/src/pages/LoginPage.tsx"],"names":["IonContent","IonHeader","IonPage","IonTitle","IonToolbar","IonButton","IonItem","IonLabel","IonInput","IonList","IonText","IonLoading","React","useState","Redirect","useAuth","auth","LoginPage","loggedIn","email","setEmail","password","setPassword","loading","error","status","setStatus","handleLogin","signInWithEmailAndPassword","credential","console","log","event","detail","value"],"mappings":"ynBAAA,OACEA,UADF,CAEEC,SAFF,CAGEC,OAHF,CAIEC,QAJF,CAKEC,UALF,CAMEC,SANF,CAOEC,OAPF,CAQEC,QARF,CASEC,QATF,CAUEC,OAVF,CAWEC,OAXF,CAYEC,UAZF,KAaO,cAbP,CAcA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,KAAyB,cAAzB,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,OAASC,IAAT,KAAqB,aAArB,CAEA;AACA;AACA;AAEA;wFACE,GAAMC,CAAAA,SAAmB,CAAG,QAAtBA,CAAAA,SAAsB,EAAM,CAClC;AACA,aAAqBF,OAAO,EAA5B,CAAQG,QAAR,UAAQA,QAAR,CACA,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eACA,eAAgCP,QAAQ,CAAC,EAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAA4BT,QAAQ,CAAC,CAACU,OAAO,CAAC,KAAT,CAAgBC,KAAK,CAAC,KAAtB,CAAD,CAApC,yCAAOC,MAAP,eAAeC,SAAf,eAEA,GAAMC,CAAAA,WAAW,0FAAG,kKAEhBD,SAAS,CAAC,CAACH,OAAO,CAAC,IAAT,CAAeC,KAAK,CAAC,KAArB,CAAD,CAAT,CAFgB,sBAGSR,CAAAA,IAAI,CAACY,0BAAL,CAAgCT,KAAhC,CAAsCE,QAAtC,CAHT,QAGVQ,UAHU,eAIhB;AACAC,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BF,UAA3B,EACA;AANgB,+EAShBH,SAAS,CAAC,CAACH,OAAO,CAAC,KAAT,CAAgBC,KAAK,CAAC,IAAtB,CAAD,CAAT,CACAM,OAAO,CAACC,GAAR,CAAY,SAAZ,cAVgB,oEAAH,kBAAXJ,CAAAA,WAAW,0CAAjB,CAcAG,OAAO,CAACC,GAAR,yBAA6Bb,QAA7B,GACA,GAAGA,QAAH,CAAa,CACX,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,aAAb,EAAP,CACD,CACD,mBACE,MAAC,OAAD,yBACE,KAAC,SAAD,wBACE,KAAC,UAAD,wBACE,KAAC,QAAD,yBADF,EADF,EADF,cAME,MAAC,UAAD,EAAY,SAAS,CAAC,aAAtB,wBACI,MAAC,OAAD,yBACE,MAAC,OAAD,yBACI,KAAC,QAAD,EAAU,QAAQ,CAAC,UAAnB,mBADJ,cAEI,KAAC,QAAD,EAAU,IAAI,CAAC,OAAf,CAAuB,KAAK,CAAEC,KAA9B,CACE,WAAW,CAAE,qBAACa,KAAD,QAAWZ,CAAAA,QAAQ,CAACY,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAnB,EADf,EAFJ,GADF,cAOE,MAAC,OAAD,yBACI,KAAC,QAAD,EAAU,QAAQ,CAAC,UAAnB,sBADJ,cAEI,KAAC,QAAD,EAAU,IAAI,CAAC,UAAf,CAA0B,KAAK,CAAEb,QAAjC,CACE,WAAW,CAAE,qBAACW,KAAD,QAAWV,CAAAA,WAAW,CAACU,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAtB,EADf,EAFJ,GAPF,GADJ,CAeKT,MAAM,CAACD,KAAP,eACC,KAAC,OAAD,EAAS,KAAK,CAAC,QAAf,iCAhBN,cAkBI,KAAC,SAAD,EAAW,MAAM,CAAC,OAAlB,CAA0B,OAAO,CAAEG,WAAnC,mBAlBJ,cAmBI,KAAC,SAAD,EAAW,MAAM,CAAC,OAAlB,CAA0B,IAAI,CAAC,OAA/B,CAAuC,UAAU,CAAC,WAAlD,oCAnBJ,cAoBI,KAAC,UAAD,EAAY,MAAM,CAAEF,MAAM,CAACF,OAA3B,EApBJ,GANF,GADF,CA+BD,CAxDC,CA0DF,cAAeN,CAAAA,SAAf","sourcesContent":["import {\n  IonContent,\n  IonHeader,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonButton,\n  IonItem,\n  IonLabel,\n  IonInput,\n  IonList,\n  IonText,\n  IonLoading\n} from '@ionic/react';\nimport React, { useState } from 'react';\nimport { Redirect } from 'react-router';\nimport { useAuth } from '../auth';\nimport { auth } from '../firebase';\n\n// interface Props {\n//   onLogin: () => void;\n// }\n\n// const LoginPage: React.FC<Props> = ({ onLogin }) => {\n  const LoginPage: React.FC = () => {\n  // const { loggedIn } = useContext(AuthContext);\n  const { loggedIn } = useAuth();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [status, setStatus] = useState({loading:false, error:false});\n\n  const handleLogin = async () => {\n    try {\n      setStatus({loading:true, error:false});\n      const credential = await auth.signInWithEmailAndPassword(email,password);\n      // setStatus({loading:false, error:false});\n      console.log('credential:', credential)\n      // onLogin();\n    }\n    catch (error) {\n      setStatus({loading:false, error:true});\n      console.log('error: ', error);\n    }\n  }\n\n  console.log(`Login Status: ${loggedIn}`);\n  if(loggedIn) {\n    return <Redirect to=\"/my/entries\" />;\n  }\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Login Page</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"ion-padding\">\n          <IonList>\n            <IonItem>\n                <IonLabel position=\"floating\">Email</IonLabel>\n                <IonInput type=\"email\" value={email}\n                  onIonChange={(event) => setEmail(event.detail.value)}\n                />\n            </IonItem>\n            <IonItem>\n                <IonLabel position=\"floating\">Password</IonLabel>\n                <IonInput type=\"password\" value={password}\n                  onIonChange={(event) => setPassword(event.detail.value)}\n                 />\n            </IonItem>\n          </IonList>\n          {status.error &&\n            <IonText color=\"danger\">Invalid Credentials</IonText>\n          }\n          <IonButton expand=\"block\" onClick={handleLogin}>Login</IonButton>\n          <IonButton expand=\"block\" fill=\"clear\" routerLink=\"/register\">Don't Have an Account?</IonButton>\n          <IonLoading isOpen={status.loading} />\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}