{"ast":null,"code":"var _jsxFileName = \"/Users/hninwintthuaung/Downloads/DailyMoments/src/pages/calendar.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport { firestore } from '../firebase';\nimport { toEntry } from '../models';\nimport { useAuth } from '../auth';\nimport { useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CalendarContainer = styled.div`\n  font-size: 0.8rem;\n`;\n_c = CalendarContainer;\nconst Card = styled.div`\n  background-color: white;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px;\n  margin: 5px;\n  cursor: pointer;\n`;\n_c2 = Card;\nconst Calendar = () => {\n  _s();\n  const {\n    userId\n  } = useAuth();\n  const [entries, setEntries] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const history = useHistory();\n  useEffect(() => {\n    const entriesRef = firestore.collection('users').doc(userId).collection('entries');\n    entriesRef.get().then(_ref => {\n      let {\n        docs\n      } = _ref;\n      setEntries(docs.map(toEntry));\n      setLoading(false);\n    });\n  }, [userId]);\n  const events = entries.map(entry => ({\n    title: entry.title,\n    date: new Date(entry.date),\n    // convert Firestore Timestamp to JavaScript Date\n    id: entry.id // add the entry id to the event object\n  }));\n\n  const handleEventClick = _ref2 => {\n    let {\n      event\n    } = _ref2;\n    history.push(`/my/entries/view/${event.id}`); // redirect to the corresponding entry page\n  };\n\n  const eventRender = _ref3 => {\n    let {\n      event\n    } = _ref3;\n    const eventEntries = entries.filter(entry => {\n      const eventDate = event.start.valueOf();\n      const entryDate = entry.date.toDate().valueOf();\n      return eventDate === entryDate;\n    });\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: eventEntries.map(entry => /*#__PURE__*/_jsxDEV(Card, {\n        onClick: () => history.push(`/my/entries/view/${entry.id}`),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: entry.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: entry.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: entry.date.toDate().toLocaleDateString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, entry.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this))\n    }, void 0, false);\n  };\n  return /*#__PURE__*/_jsxDEV(CalendarContainer, {\n    children: !loading && /*#__PURE__*/_jsxDEV(FullCalendar, {\n      plugins: [dayGridPlugin],\n      initialView: \"dayGridMonth\",\n      events: events,\n      eventClick: handleEventClick,\n      eventRender: eventRender // attach the eventRender function\n      ,\n      lazyFetching: true,\n      height: \"450px\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(Calendar, \"79ky0+wRV+GoCvG2gWqwbOBZ/CM=\", false, function () {\n  return [useAuth, useHistory];\n});\n_c3 = Calendar;\nexport default Calendar;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"CalendarContainer\");\n$RefreshReg$(_c2, \"Card\");\n$RefreshReg$(_c3, \"Calendar\");","map":{"version":3,"names":["React","useState","useEffect","FullCalendar","dayGridPlugin","firestore","toEntry","useAuth","useHistory","styled","jsxDEV","_jsxDEV","Fragment","_Fragment","CalendarContainer","div","_c","Card","_c2","Calendar","_s","userId","entries","setEntries","loading","setLoading","history","entriesRef","collection","doc","get","then","_ref","docs","map","events","entry","title","date","Date","id","handleEventClick","_ref2","event","push","eventRender","_ref3","eventEntries","filter","eventDate","start","valueOf","entryDate","toDate","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","description","toLocaleDateString","plugins","initialView","eventClick","lazyFetching","height","_c3","$RefreshReg$"],"sources":["/Users/hninwintthuaung/Downloads/DailyMoments/src/pages/calendar.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport { firestore } from '../firebase';\nimport { Entry, toEntry } from '../models';\nimport { useAuth } from '../auth';\nimport { useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\n\nconst CalendarContainer = styled.div`\n  font-size: 0.8rem;\n`;\n\nconst Card = styled.div`\n  background-color: white;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px;\n  margin: 5px;\n  cursor: pointer;\n`;\n\nconst Calendar: React.FC = () => {\n  const { userId } = useAuth();\n  const [entries, setEntries] = useState<Entry[]>([]);\n  const [loading, setLoading] = useState(true);\n  const history = useHistory();\n\n  useEffect(() => {\n    const entriesRef = firestore\n      .collection('users')\n      .doc(userId)\n      .collection('entries');\n    entriesRef.get().then(({ docs }) => {\n      setEntries(docs.map(toEntry));\n      setLoading(false);\n    });\n  }, [userId]);\n\n  const events = entries.map((entry) => ({\n    title: entry.title,\n    date: new Date(entry.date), // convert Firestore Timestamp to JavaScript Date\n    id: entry.id // add the entry id to the event object\n  }));\n\n  const handleEventClick = ({ event }: { event: any }) => {\n    history.push(`/my/entries/view/${event.id}`); // redirect to the corresponding entry page\n  };\n\n  const eventRender = ({ event }: { event: any }) => {\n    const eventEntries = entries.filter((entry) => {\n      const eventDate = event.start.valueOf();\n      const entryDate = entry.date.toDate().valueOf();\n      return eventDate === entryDate;\n    });\n\n    return (\n      <>\n        {eventEntries.map((entry) => (\n          <Card key={entry.id} onClick={() => history.push(`/my/entries/view/${entry.id}`)}>\n            <div>{entry.title}</div>\n            <div>{entry.description}</div>\n            <div>{entry.date.toDate().toLocaleDateString()}</div>\n          </Card>\n        ))}\n      </>\n    );\n  };\n\n  return (\n    <CalendarContainer>\n      {!loading && (\n        <FullCalendar\n          plugins={[dayGridPlugin]}\n          initialView=\"dayGridMonth\"\n          events={events}\n          eventClick={handleEventClick}\n          eventRender={eventRender} // attach the eventRender function\n          lazyFetching={true}\n          height='450px'\n        />\n      )}\n    </CalendarContainer>\n  );\n};\n\nexport default Calendar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}