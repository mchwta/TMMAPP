{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hninwintthuaung/Desktop/tester/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonContent,IonFab,IonFabButton,IonHeader,IonIcon,IonItem,IonPage,IonTitle,IonToolbar,IonLabel,IonList,IonItemSliding,IonText,IonItemOptions,IonItemOption,IonToggle}from'@ionic/react';import React,{useEffect,useState}from'react';import{useAuth}from'../auth';import{firestore}from'../firebase';import{toEntry}from'../models';import{add as addIcon,checkmarkCircleOutline,checkmarkDoneCircleSharp}from'ionicons/icons';import{formatDate}from'../date';import{useRouteMatch}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(){var match=useRouteMatch();var id=match.params.id;var _useAuth=useAuth(),userId=_useAuth.userId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),entries=_useState2[0],setEntries=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCompleted=_useState4[0],setShowCompleted=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showConfirmDelete=_useState6[0],setShowConfirmDelete=_useState6[1];useEffect(function(){var entriesRef=firestore.collection('users').doc(userId).collection('entries').orderBy('date','desc');return entriesRef.onSnapshot(function(_ref){var docs=_ref.docs;return setEntries(docs.map(toEntry));});},[userId]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var entryRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setShowConfirmDelete(false);entryRef=firestore.collection('users').doc(userId).collection('entries').doc(id);_context.next=4;return entryRef.delete();case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();var handleComplete=function handleComplete(entry){var entryRef=firestore.collection('users').doc(userId).collection('entries').doc(entry.id);entryRef.update({completed:!entry.completed}).then(function(){console.log('Entry updated successfully!');}).catch(function(error){console.error('Error updating entry: ',error);});};// filter entries based on showCompleted state\n// filter entries based on showCompleted state\nvar filteredEntries=entries.filter(function(entry){if(showCompleted){return entry.completed;// show all entries\n}else{return!entry.completed;// only show incomplete entries\n}});return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Homepage\"})})}),/*#__PURE__*/_jsxs(IonContent,{children:[/*#__PURE__*/_jsx(IonList,{children:/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{children:\"Completed\"}),/*#__PURE__*/_jsx(IonToggle,{checked:showCompleted,onIonChange:function onIonChange(e){return setShowCompleted(e.detail.checked);}})]})}),filteredEntries.map(function(entry){return/*#__PURE__*/_jsxs(IonItemSliding,{children:[/*#__PURE__*/_jsxs(IonItem,{routerLink:\"/my/entries/view/\".concat(entry.id),children:[/*#__PURE__*/_jsxs(IonText,{children:[/*#__PURE__*/_jsx(\"h2\",{children:entry.title}),/*#__PURE__*/_jsx(\"h6\",{children:formatDate(entry.date)})]}),entry.completed?/*#__PURE__*/_jsx(IonIcon,{slot:\"start\",icon:checkmarkDoneCircleSharp,color:\"light\"}):/*#__PURE__*/_jsx(IonIcon,{slot:\"start\",icon:checkmarkCircleOutline,color:\"light\"})]}),!entry.completed&&/*#__PURE__*/_jsx(IonItemOptions,{side:\"end\",children:/*#__PURE__*/_jsx(IonItemOption,{color:\"success\",onClick:function onClick(){return handleComplete(entry);},children:/*#__PURE__*/_jsx(IonIcon,{slot:\"icon-only\",icon:checkmarkDoneCircleSharp})})}),entry.completed&&/*#__PURE__*/_jsx(IonItemOptions,{side:\"end\",children:/*#__PURE__*/_jsx(IonItemOption,{color:\"danger\",onClick:function onClick(){return handleComplete(entry);},children:/*#__PURE__*/_jsx(IonIcon,{slot:\"icon-only\",icon:checkmarkCircleOutline})})})]},entry.id);}),/*#__PURE__*/_jsx(IonFab,{vertical:\"bottom\",horizontal:\"end\",slot:\"fixed\",children:/*#__PURE__*/_jsx(IonFabButton,{routerLink:\"/my/entries/add\",children:/*#__PURE__*/_jsx(IonIcon,{icon:addIcon})})})]})]});};export default HomePage;","map":{"version":3,"names":["IonContent","IonFab","IonFabButton","IonHeader","IonIcon","IonItem","IonPage","IonTitle","IonToolbar","IonLabel","IonList","IonItemSliding","IonText","IonItemOptions","IonItemOption","IonToggle","React","useEffect","useState","useAuth","firestore","toEntry","add","addIcon","checkmarkCircleOutline","checkmarkDoneCircleSharp","formatDate","useRouteMatch","jsx","_jsx","jsxs","_jsxs","HomePage","match","id","params","_useAuth","userId","_useState","_useState2","_slicedToArray","entries","setEntries","_useState3","_useState4","showCompleted","setShowCompleted","_useState5","_useState6","showConfirmDelete","setShowConfirmDelete","entriesRef","collection","doc","orderBy","onSnapshot","_ref","docs","map","handleDelete","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","entryRef","wrap","_callee$","_context","prev","next","delete","stop","apply","arguments","handleComplete","entry","update","completed","then","console","log","catch","error","filteredEntries","filter","children","checked","onIonChange","e","detail","routerLink","concat","title","date","slot","icon","color","side","onClick","vertical","horizontal"],"sources":["/Users/hninwintthuaung/Desktop/tester/src/pages/HomePage.tsx"],"sourcesContent":["import {\n  IonContent,\n  IonFab,\n  IonFabButton,\n  IonHeader,\n  IonIcon,\n  IonItem,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonLabel,\n  IonThumbnail,\n  IonImg,\n  IonList,\n  IonItemSliding,\n  IonText,\n  IonItemOptions,\n  IonItemOption,\n  IonCard,\n  IonCheckbox,\n  IonToggle,\n} from '@ionic/react';\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../auth';\nimport { firestore } from '../firebase';\nimport { Entry, toEntry } from '../models';\nimport { add as addIcon, checkmarkCircleOutline, checkmarkCircleSharp, checkmarkDoneCircleOutline, checkmarkDoneCircleSharp, handLeft } from 'ionicons/icons';\nimport { formatDate } from '../date';\nimport { useRouteMatch } from 'react-router';\n\n\ninterface RouteParams {\n  id: string;\n}\n\nconst HomePage: React.FC = () => {\n  const match = useRouteMatch<RouteParams>();\n  const { id } = match.params;\n  const { userId } = useAuth();\n  const [entries, setEntries] = useState<Entry[]>([]);\n  const [showCompleted, setShowCompleted] = useState(false);\n  const [showConfirmDelete, setShowConfirmDelete] = useState(false);\n\n  useEffect(() => {\n    const entriesRef = firestore\n      .collection('users')\n      .doc(userId)\n      .collection('entries')\n      .orderBy('date', 'desc');\n\n\n    return entriesRef.onSnapshot(({ docs }) => setEntries(docs.map(toEntry)));\n  }, [userId]);\n  \n  const handleDelete = async () => {\n    setShowConfirmDelete(false);\n    const entryRef = firestore.collection('users').doc(userId)\n      .collection('entries').doc(id);\n    await entryRef.delete();\n  };\n  const handleComplete = (entry: Entry) => {\n    const entryRef = firestore\n      .collection('users')\n      .doc(userId)\n      .collection('entries')\n      .doc(entry.id);\n  \n    entryRef\n      .update({\n        completed: !entry.completed,\n      })\n      .then(() => {\n        console.log('Entry updated successfully!');\n      })\n      .catch((error) => {\n        console.error('Error updating entry: ', error);\n      });\n  };\n  \n\n  // filter entries based on showCompleted state\n// filter entries based on showCompleted state\n      const filteredEntries = entries.filter((entry) => {\n        if (showCompleted) {\n          return entry.completed; // show all entries\n        } else {\n          return !entry.completed; // only show incomplete entries\n        }\n      });\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Homepage</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <IonList>\n          <IonItem>\n            <IonLabel>Completed</IonLabel>\n            <IonToggle checked={showCompleted} onIonChange={(e) => setShowCompleted(e.detail.checked)} />\n          </IonItem>\n        </IonList>\n        {filteredEntries.map((entry) => (\n          <IonItemSliding key={entry.id}>\n            <IonItem routerLink={`/my/entries/view/${entry.id}`}>\n              <IonText>\n                <h2>{entry.title}</h2>\n                <h6>{formatDate(entry.date)}</h6>\n              </IonText>\n              {entry.completed ? (\n                <IonIcon slot=\"start\" icon={checkmarkDoneCircleSharp} color=\"light\" />\n              ) : (\n                <IonIcon slot=\"start\" icon={checkmarkCircleOutline} color=\"light\" />\n              )}\n            </IonItem>\n            {!entry.completed && (\n              <IonItemOptions side=\"end\">\n                <IonItemOption color=\"success\" onClick={() => handleComplete(entry)}>\n                  <IonIcon slot=\"icon-only\" icon={checkmarkDoneCircleSharp} />\n                </IonItemOption>\n              </IonItemOptions>\n            )}\n            {entry.completed && (\n              <IonItemOptions side=\"end\">\n                <IonItemOption color=\"danger\" onClick={() => handleComplete(entry)}>\n                  <IonIcon slot=\"icon-only\" icon={checkmarkCircleOutline} />\n                </IonItemOption>\n              </IonItemOptions>\n            )}\n          </IonItemSliding>\n        ))}\n\n\n\n\n        <IonFab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n          <IonFabButton routerLink=\"/my/entries/add\">\n            <IonIcon icon={addIcon} />\n          </IonFabButton>\n        </IonFab>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default HomePage;\n"],"mappings":"idAAA,OACEA,UAAU,CACVC,MAAM,CACNC,YAAY,CACZC,SAAS,CACTC,OAAO,CACPC,OAAO,CACPC,OAAO,CACPC,QAAQ,CACRC,UAAU,CACVC,QAAQ,CAGRC,OAAO,CACPC,cAAc,CACdC,OAAO,CACPC,cAAc,CACdC,aAAa,CAGbC,SAAS,KACJ,cAAc,CACrB,MAAO,CAAAC,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,SAAS,CACjC,OAASC,SAAS,KAAQ,aAAa,CACvC,OAAgBC,OAAO,KAAQ,WAAW,CAC1C,OAASC,GAAG,GAAI,CAAAC,OAAO,CAAEC,sBAAsB,CAAoDC,wBAAwB,KAAkB,gBAAgB,CAC7J,OAASC,UAAU,KAAQ,SAAS,CACpC,OAASC,aAAa,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAO7C,GAAM,CAAAC,QAAkB,CAAG,QAArB,CAAAA,QAAkBA,CAAA,CAAS,CAC/B,GAAM,CAAAC,KAAK,CAAGN,aAAa,EAAe,CAC1C,GAAQ,CAAAO,EAAE,CAAKD,KAAK,CAACE,MAAM,CAAnBD,EAAE,CACV,IAAAE,QAAA,CAAmBjB,OAAO,EAAE,CAApBkB,MAAM,CAAAD,QAAA,CAANC,MAAM,CACd,IAAAC,SAAA,CAA8BpB,QAAQ,CAAU,EAAE,CAAC,CAAAqB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5CG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC1B,IAAAI,UAAA,CAA0CzB,QAAQ,CAAC,KAAK,CAAC,CAAA0B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAlDE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IACtC,IAAAG,UAAA,CAAkD7B,QAAQ,CAAC,KAAK,CAAC,CAAA8B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA1DE,iBAAiB,CAAAD,UAAA,IAAEE,oBAAoB,CAAAF,UAAA,IAE9C/B,SAAS,CAAC,UAAM,CACd,GAAM,CAAAkC,UAAU,CAAG/B,SAAS,CACzBgC,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAAChB,MAAM,CAAC,CACXe,UAAU,CAAC,SAAS,CAAC,CACrBE,OAAO,CAAC,MAAM,CAAE,MAAM,CAAC,CAG1B,MAAO,CAAAH,UAAU,CAACI,UAAU,CAAC,SAAAC,IAAA,KAAG,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,OAAO,CAAAf,UAAU,CAACe,IAAI,CAACC,GAAG,CAACrC,OAAO,CAAC,CAAC,GAAC,CAC3E,CAAC,CAAE,CAACgB,MAAM,CAAC,CAAC,CAEZ,GAAM,CAAAsB,YAAY,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACnBpB,oBAAoB,CAAC,KAAK,CAAC,CACrBe,QAAQ,CAAG7C,SAAS,CAACgC,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,CAAChB,MAAM,CAAC,CACvDe,UAAU,CAAC,SAAS,CAAC,CAACC,GAAG,CAACnB,EAAE,CAAC,CAAAkC,QAAA,CAAAE,IAAA,SAC1B,CAAAL,QAAQ,CAACM,MAAM,EAAE,yBAAAH,QAAA,CAAAI,IAAA,OAAAR,OAAA,GACxB,kBALK,CAAAL,YAAYA,CAAA,SAAAC,KAAA,CAAAa,KAAA,MAAAC,SAAA,OAKjB,CACD,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIC,KAAY,CAAK,CACvC,GAAM,CAAAX,QAAQ,CAAG7C,SAAS,CACvBgC,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAAChB,MAAM,CAAC,CACXe,UAAU,CAAC,SAAS,CAAC,CACrBC,GAAG,CAACuB,KAAK,CAAC1C,EAAE,CAAC,CAEhB+B,QAAQ,CACLY,MAAM,CAAC,CACNC,SAAS,CAAE,CAACF,KAAK,CAACE,SACpB,CAAC,CAAC,CACDC,IAAI,CAAC,UAAM,CACVC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC5C,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,KAAK,CAAK,CAChBH,OAAO,CAACG,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CAAC,CAAC,CACN,CAAC,CAGD;AACF;AACM,GAAM,CAAAC,eAAe,CAAG3C,OAAO,CAAC4C,MAAM,CAAC,SAACT,KAAK,CAAK,CAChD,GAAI/B,aAAa,CAAE,CACjB,MAAO,CAAA+B,KAAK,CAACE,SAAS,CAAE;AAC1B,CAAC,IAAM,CACL,MAAO,CAACF,KAAK,CAACE,SAAS,CAAE;AAC3B,CACF,CAAC,CAAC,CAEN,mBACE/C,KAAA,CAACzB,OAAO,EAAAgF,QAAA,eACNzD,IAAA,CAAC1B,SAAS,EAAAmF,QAAA,cACRzD,IAAA,CAACrB,UAAU,EAAA8E,QAAA,cACTzD,IAAA,CAACtB,QAAQ,EAAA+E,QAAA,CAAC,UAAQ,EAAW,EAClB,EACH,cACZvD,KAAA,CAAC/B,UAAU,EAAAsF,QAAA,eACTzD,IAAA,CAACnB,OAAO,EAAA4E,QAAA,cACNvD,KAAA,CAAC1B,OAAO,EAAAiF,QAAA,eACNzD,IAAA,CAACpB,QAAQ,EAAA6E,QAAA,CAAC,WAAS,EAAW,cAC9BzD,IAAA,CAACd,SAAS,EAACwE,OAAO,CAAE1C,aAAc,CAAC2C,WAAW,CAAE,SAAAA,YAACC,CAAC,QAAK,CAAA3C,gBAAgB,CAAC2C,CAAC,CAACC,MAAM,CAACH,OAAO,CAAC,EAAC,EAAG,GACrF,EACF,CACTH,eAAe,CAAC1B,GAAG,CAAC,SAACkB,KAAK,qBACzB7C,KAAA,CAACpB,cAAc,EAAA2E,QAAA,eACbvD,KAAA,CAAC1B,OAAO,EAACsF,UAAU,qBAAAC,MAAA,CAAsBhB,KAAK,CAAC1C,EAAE,CAAG,CAAAoD,QAAA,eAClDvD,KAAA,CAACnB,OAAO,EAAA0E,QAAA,eACNzD,IAAA,OAAAyD,QAAA,CAAKV,KAAK,CAACiB,KAAK,EAAM,cACtBhE,IAAA,OAAAyD,QAAA,CAAK5D,UAAU,CAACkD,KAAK,CAACkB,IAAI,CAAC,EAAM,GACzB,CACTlB,KAAK,CAACE,SAAS,cACdjD,IAAA,CAACzB,OAAO,EAAC2F,IAAI,CAAC,OAAO,CAACC,IAAI,CAAEvE,wBAAyB,CAACwE,KAAK,CAAC,OAAO,EAAG,cAEtEpE,IAAA,CAACzB,OAAO,EAAC2F,IAAI,CAAC,OAAO,CAACC,IAAI,CAAExE,sBAAuB,CAACyE,KAAK,CAAC,OAAO,EAClE,GACO,CACT,CAACrB,KAAK,CAACE,SAAS,eACfjD,IAAA,CAAChB,cAAc,EAACqF,IAAI,CAAC,KAAK,CAAAZ,QAAA,cACxBzD,IAAA,CAACf,aAAa,EAACmF,KAAK,CAAC,SAAS,CAACE,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAxB,cAAc,CAACC,KAAK,CAAC,EAAC,CAAAU,QAAA,cAClEzD,IAAA,CAACzB,OAAO,EAAC2F,IAAI,CAAC,WAAW,CAACC,IAAI,CAAEvE,wBAAyB,EAAG,EAC9C,EAEnB,CACAmD,KAAK,CAACE,SAAS,eACdjD,IAAA,CAAChB,cAAc,EAACqF,IAAI,CAAC,KAAK,CAAAZ,QAAA,cACxBzD,IAAA,CAACf,aAAa,EAACmF,KAAK,CAAC,QAAQ,CAACE,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAxB,cAAc,CAACC,KAAK,CAAC,EAAC,CAAAU,QAAA,cACjEzD,IAAA,CAACzB,OAAO,EAAC2F,IAAI,CAAC,WAAW,CAACC,IAAI,CAAExE,sBAAuB,EAAG,EAC5C,EAEnB,GAzBkBoD,KAAK,CAAC1C,EAAE,CA0BZ,EAClB,CAAC,cAKFL,IAAA,CAAC5B,MAAM,EAACmG,QAAQ,CAAC,QAAQ,CAACC,UAAU,CAAC,KAAK,CAACN,IAAI,CAAC,OAAO,CAAAT,QAAA,cACrDzD,IAAA,CAAC3B,YAAY,EAACyF,UAAU,CAAC,iBAAiB,CAAAL,QAAA,cACxCzD,IAAA,CAACzB,OAAO,EAAC4F,IAAI,CAAEzE,OAAQ,EAAG,EACb,EACR,GACE,GACL,CAEd,CAAC,CAED,cAAe,CAAAS,QAAQ"},"metadata":{},"sourceType":"module"}